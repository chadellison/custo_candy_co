<p>
  <% flash.each do |type, msg| %>
    <%= content_tag :div, sanitize(msg), class: "flash_#{type} flash" %>
  <% end %>
</p>

<div>
  <% unless @cart.contents.empty? %>

  <table class="highlight">
    <thead>
     <tr>
       <th><strong>Remove</strong></th>
       <th><strong>Candy</strong></th>
       <th><strong>Description</strong></th>
       <th><strong>Price</strong></th>
       <th><strong>Quantity</strong></th>
       <th><strong></strong></th>
       <th><strong></strong></th>
     </tr>
    </thead>
    <tbody>
    <% @cart.contents.each do |id, quantity| %>
      <% candy = Candy.find(id) %>
      <tr>
        <td><div id="<%= candy.id %>"><%= button_to "Remove", cart_path(candy_id: candy.id), method: "delete" %></div></td>
        <td><%= candy.title %></td>
        <td><%= candy.description %></td>
        <td><%= candy.to_dollars %></td>
        <td><%= quantity %></td>
        <td><%= button_to "+", cart_path(candy_id: candy.id, operator: "+"), method: :put %></td>
        <td><%= button_to "-", cart_path(candy_id: candy.id, operator: "-"), method: :put %></td>
      </tr>
    <% end %>
    </tbody>
    </table>
    <h4>Total Price: <%= @cart.total_cost %></h4>
    <%= button_to "Submit order", orders_path(contents: @cart.contents) %>
    <% else %>
      <h2>You have no items in your cart</h2>
    <% end %>
</div>
